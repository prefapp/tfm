---
kind: TFWorkspaceClaim
lifecycle: production
name: corpme-common-mongodbatlas-predev
system: "system:corpme"
version: "1.0"
providers:
  terraform:
    tfStateKey: 22825045-427f-4c70-926d-c1b243facf03
    name: corpme-common-mongodbatlas-predev
    policy: apply
    source: Inline
    values:
      # Global variables
      mongo_region: "EUROPE_WEST"
      provider_name: "AZURE"

      # Project seccion variables
      org_id: "65f8d0d1d0c28305b4c88fd2"
      project_name: "corpme-predev"

      # Cluster seccion variables
      cluster_name: "predev"
      cluster_type: "REPLICASET"
      cluster_replication_specs_config_analytics_nodes: 0
      cluster_replication_specs_config_electable_nodes: 3
      cluster_replication_specs_config_priority: 7
      cluster_replication_specs_config_read_only_nodes: 0
      cluster_cloud_backup: true
      cluster_auto_scaling_disk_gb_enabled: true
      cluster_mongo_db_major_version: "6.0"
      cluster_provider_disk_type_name: "P6"
      cluster_provider_instance_size_name: "M10"
      cluster_num_shards: 1
      cluster_zone: "Zone 1"

      # MongoDB Shutter dev seccion variables
      shutter_dev_db_username: "shutter_dev"
      shutter_dev_db_auth_database_name: "admin"
      shutter_dev_db_roles_role_name: "readWrite"
      shutter_dev_db_roles_database_name: "shutter-dev"
      shutter_dev_db_scopes_name: "predev"
      shutter_dev_db_scopes_type: "CLUSTER"

      # MongoDB Shutter pre seccion variables
      shutter_pre_db_username: "shutter_pre"
      shutter_pre_db_auth_database_name: "admin"
      shutter_pre_db_roles_role_name: "readWrite"
      shutter_pre_db_roles_database_name: "shutter-pre"
      shutter_pre_db_scopes_name: "predev"
      shutter_pre_db_scopes_type: "CLUSTER"

      # MongoDB Rivulet dev seccion variables
      rivulet_dev_db_username: "rivulet_dev"
      rivulet_dev_db_auth_database_name: "admin"
      rivulet_dev_db_roles_role_name: "readWrite"
      rivulet_dev_db_roles_database_name: "rivulet-dev"
      rivulet_dev_db_scopes_name: "predev"
      rivulet_dev_db_scopes_type: "CLUSTER"

      # MongoDB Rivulet pre seccion variables
      rivulet_pre_db_username: "rivulet_pre"
      rivulet_pre_db_auth_database_name: "admin"
      rivulet_pre_db_roles_role_name: "readWrite"
      rivulet_pre_db_roles_database_name: "rivulet-pre"
      rivulet_pre_db_scopes_name: "predev"
      rivulet_pre_db_scopes_type: "CLUSTER"

      # MongoDB admin seccion variables
      mongo_admin_db_username: "mongo_admin_predev"
      mongo_admin_db_auth_database_name: "admin"
      mongo_admin_db_roles_role_name: "atlasAdmin"
      mongo_admin_db_roles_database_name: "admin"

      # Endpoint seccion variables
      endpoint_name: "mongodb-atlas-corpme-predev"
      endpoint_location: "westeurope"
      endpoint_resource_group_name: "corpme-common-predev"
      endpoint_connection_is_manual_connection: true
      endpoint_connection_request_message: "Azure Private Link Service Connection"

      # Locals
      whitelist_ips:
        - ip: "2.155.24.103"
          name: "central-aks"
        - ip: "13.95.162.10"
          name: "AKS - Central - static IP"

    context:
      providers:
        - name: azure-provider-corpme
        - name: mongodb-atlas-corpme
      backend:
        name: azure-backend-terraform
